version: 0.2
phases:
  install:
    commands:
    - yarn install
    - yarn global add pm2 wait-on
  pre_build:
    commands:
    - pm2 start yarn -- start
    - 'wait-on http://localhost:8080'
  build:
    commands:
    - yarn test
  post_build:
    commands:
    - pm2 kill
reports:
  cucumber:
    base-directory: cypress/cucumber-json
    files:
    - '**/*'
    file-format: CUCUMBERJSON
cache:
  paths:
  - 'node_modules/**/*'
